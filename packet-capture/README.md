# _Scripts_ para realizar captura de tráfego separada por _hosts_.

## Arquivos

- **get_iface_namespace.py** : _Script_ para retornar o _namespace_ e a interface de rede Linux de uma porta no serviço Neutron do Openstack;
- **stratified-capture_v3.py/** : _Script_ de captura por host e tráfego a partir dos arquivos de configuração `.ini`;
- **capture.ini** : Arquivo com os _hosts_ para captura do tráfego original;
- **capture-replay.ini** : Arquivo com os _hosts_ para captura do tráfego replicado;
- **merge_pcaps_v2.sh** : _Script_ para juntar arquivos PCAP;
- **num_packets.sh** : _Script_ para listar os números de pacotes SYN, SYN-ACK, RST.


# Tech Info

## Disable GRO/LRO on Linux

```bash
# Show NIC Features
ethtool -k <interface>
# Show only offload
ethtool --show-offload <interface>

# Disable/Enable generic-receive-offload
ethtool -K <interface> gro on|off

# Disable/Enable large-receive-offload
ethtool -K <interface> lro on|off


## All Offloads
# Disable
ethtool -K <interface> tx off rx off gro off lro off tso off gso off ufo off
# Enable
ethtool -K <interface> tx on rx on gro on lro on tso on gso on ufo on
```

## Forcing Checksum Calculation

Many network cards support TCP/UDP/IP checksum offloading, so if you capture traffic which was generated by the same system, the checksums will be incorrect. This can obviously cause problems later on when you try replaying the traffic. By using the --fixcsum flag, you can force tcprewrite to fix the checksums. Note, tcprewrite will automatically fix checksums when editing packets.

```bash
tcprewrite --fixcsum --infile=input.pcap --outfile=output.pcap
```
